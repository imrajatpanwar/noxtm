{"ast":null,"code":"import _objectSpread from\"/Users/aaravpanwar/noxtmstudio/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{CiSearch}from'react-icons/ci';import{FiEdit3,FiEye,FiTrash2}from'react-icons/fi';import{toast}from'sonner';import api from'../config/api';import{useRole,MODULES}from'../contexts/RoleContext';import'./UsersRoles.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function UsersRoles(){const{setUsers:setContextUsers,updateUserRole,currentUser}=useRole();const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[selectedUser,setSelectedUser]=useState(null);const[showSidePanel,setShowSidePanel]=useState(false);const[availableRoles,setAvailableRoles]=useState([]);const[openMenuId,setOpenMenuId]=useState(null);// Simplified admin check - prioritize context user, fallback to localStorage\nconst isCurrentUserAdmin=(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='Admin';const localStorageUser=JSON.parse(localStorage.getItem('user')||'{}');const isAdminFromLocalStorage=(localStorageUser===null||localStorageUser===void 0?void 0:localStorageUser.role)==='Admin';const finalIsAdmin=isCurrentUserAdmin||isAdminFromLocalStorage;console.log('Admin check:',{currentUser:currentUser===null||currentUser===void 0?void 0:currentUser.role,localUser:localStorageUser===null||localStorageUser===void 0?void 0:localStorageUser.role,finalIsAdmin});// Fetch available roles from backend\nconst fetchRoles=useCallback(async()=>{const fallbackRoles=['User','Admin','Project Manager','Data Miner','Data Analyst','Social Media Manager','Human Resource','Graphic Designer','Web Developer','SEO Manager'];try{const token=localStorage.getItem('token');if(!token){setAvailableRoles(fallbackRoles);return;}const response=await api.get('/roles');console.log('Fetched roles from backend:',response.data.roles);setAvailableRoles(response.data.roles||fallbackRoles);}catch(error){console.error('Error fetching roles:',error);setAvailableRoles(fallbackRoles);}},[]);// Consolidated user fetching logic\nconst fetchUsers=useCallback(async()=>{try{setLoading(true);setError(null);const token=localStorage.getItem('token');if(!token){console.log('No token found, using demo data');const demoUsers=JSON.parse(localStorage.getItem('usersData')||'[]');setUsers(demoUsers);setContextUsers(demoUsers);return;}// Try API call first\nconst response=await api.get('/users');const transformedUsers=response.data.users.map(user=>({id:user._id,name:user.username,email:user.email,role:user.role,status:user.status,access:user.access||[]}));setUsers(transformedUsers);setContextUsers(transformedUsers);}catch(error){console.error('API Error, falling back to demo data:',error);// Fallback to demo data only on API error\nconst demoUsers=JSON.parse(localStorage.getItem('usersData')||'[]');if(demoUsers.length>0){setUsers(demoUsers);setContextUsers(demoUsers);setError(null);// Clear error since we have fallback data\n}else{var _error$response,_error$response$data;setError('Failed to fetch users: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message));}}finally{setLoading(false);}},[setContextUsers]);// Update user role\nconst handleRoleChange=async(userId,newRole)=>{console.log('handleRoleChange called:',{userId,newRole,finalIsAdmin});if(!finalIsAdmin){toast.error('Only administrators can change user roles');return;}try{setError(null);const newStatus=newRole==='User'?'In Review':'Active';console.log('Setting new status:',newStatus);const result=await updateUserRole(userId,newRole,newStatus);console.log('updateUserRole result:',result);if(result.success){// Update local state immediately for UI responsiveness\nsetUsers(prevUsers=>prevUsers.map(user=>user.id===userId?_objectSpread(_objectSpread({},user),{},{role:newRole,status:newStatus}):user));toast.success(\"User role updated to \".concat(newRole,\" and status set to \").concat(newStatus));}else{setError(\"Failed to update user role: \".concat(result.error));toast.error(\"Failed to update user role: \".concat(result.error));}}catch(error){console.error('Error updating user role:',error);setError('Failed to update user role: '+error.message);toast.error('Failed to update user role: '+error.message);}};// Toggle menu visibility\nconst toggleMenu=userId=>{setOpenMenuId(openMenuId===userId?null:userId);};// Handle menu actions\nconst handleMenuAction=async(userId,action)=>{setOpenMenuId(null);try{setError(null);if(action==='edit'){if(!finalIsAdmin){toast.error('Only administrators can edit user profiles');return;}setSelectedUser(users.find(user=>user.id===userId));setShowSidePanel(true);toast.info('Edit user panel opened');}else if(action==='view'){setSelectedUser(users.find(user=>user.id===userId));setShowSidePanel(true);toast.info('Viewing user profile');}else if(action==='delete'){if(!finalIsAdmin){toast.error('Only administrators can delete users');return;}if(window.confirm('Are you sure you want to delete this user? This action cannot be undone.')){const response=await api.delete(\"/users/\".concat(userId));if(response.status===200){setUsers(prevUsers=>prevUsers.filter(user=>user.id!==userId));toast.success('User deleted successfully');}}}}catch(error){console.error('Error performing user action:',error);setError('Failed to perform action: '+error.message);toast.error('Failed to perform action: '+error.message);}};// Initialize data on component mount\nif(!user)return null;// Mock additional user data - in real app this would come from API\nconst userDetails=_objectSpread(_objectSpread({},user),{},{currentProjects:5,totalProjects:21,joinDate:'10 - 04 - 2024',phone:'+91 9098989281',location:'Coffee Estate Homestay, Mullayanagiri Road, Kaimara, Chikmagalur, Karnataka - 577101, India',languages:['English','Hindi'],maritalStatus:'Single',employmentId:'0020192',responseTime:'24m'});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"side-panel-overlay \".concat(isVisible?'visible':''),onClick:onClose}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details-side-panel \".concat(isVisible?'visible':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"side-panel-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"User Preview\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"side-panel-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar-large\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar-icon-large\",children:\"\\uD83D\\uDC64\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info-text\",children:[/*#__PURE__*/_jsx(\"h2\",{children:userDetails.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-status-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-dot-green\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:\"Online\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"user-email-large\",children:userDetails.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"project-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Currently\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:userDetails.currentProjects})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Projects\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:userDetails.totalProjects})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"details-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"User Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid-two-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Join Date\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value blue-text\",children:userDetails.joinDate})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Phone No.\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value blue-text\",children:userDetails.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Designation\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.role})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Location\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Employment ID\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.employmentId})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Language Spoken\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.languages.join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Marital Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.maritalStatus})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Response Time\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:userDetails.responseTime})]})]})]})]})]})]})]});}export default UsersRoles;","map":{"version":3,"names":["React","useState","useEffect","useCallback","CiSearch","FiEdit3","FiEye","FiTrash2","toast","api","useRole","MODULES","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UsersRoles","setUsers","setContextUsers","updateUserRole","currentUser","users","loading","setLoading","error","setError","searchTerm","setSearchTerm","selectedUser","setSelectedUser","showSidePanel","setShowSidePanel","availableRoles","setAvailableRoles","openMenuId","setOpenMenuId","isCurrentUserAdmin","role","localStorageUser","JSON","parse","localStorage","getItem","isAdminFromLocalStorage","finalIsAdmin","console","log","localUser","fetchRoles","fallbackRoles","token","response","get","data","roles","fetchUsers","demoUsers","transformedUsers","map","user","id","_id","name","username","email","status","access","length","_error$response","_error$response$data","message","handleRoleChange","userId","newRole","newStatus","result","success","prevUsers","_objectSpread","concat","toggleMenu","handleMenuAction","action","find","info","window","confirm","delete","filter","userDetails","currentProjects","totalProjects","joinDate","phone","location","languages","maritalStatus","employmentId","responseTime","children","className","isVisible","onClick","onClose","join"],"sources":["/Users/aaravpanwar/noxtmstudio/Frontend/src/components/UsersRoles.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { CiSearch } from 'react-icons/ci';\nimport { FiEdit3, FiEye, FiTrash2 } from 'react-icons/fi';\nimport { toast } from 'sonner';\nimport api from '../config/api';\nimport { useRole, MODULES } from '../contexts/RoleContext';\nimport './UsersRoles.css';\n\nfunction UsersRoles() {\n  const { \n     \n    setUsers: setContextUsers, \n    updateUserRole,\n    currentUser\n  } = useRole();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [showSidePanel, setShowSidePanel] = useState(false);\n  const [availableRoles, setAvailableRoles] = useState([]);\n  const [openMenuId, setOpenMenuId] = useState(null);\n\n  // Simplified admin check - prioritize context user, fallback to localStorage\n  const isCurrentUserAdmin = currentUser?.role === 'Admin';\n  const localStorageUser = JSON.parse(localStorage.getItem('user') || '{}');\n  const isAdminFromLocalStorage = localStorageUser?.role === 'Admin';\n  const finalIsAdmin = isCurrentUserAdmin || isAdminFromLocalStorage;\n\n  console.log('Admin check:', { currentUser: currentUser?.role, localUser: localStorageUser?.role, finalIsAdmin });\n\n  // Fetch available roles from backend\n  const fetchRoles = useCallback(async () => {\n    const fallbackRoles = [\n      'User', 'Admin', 'Project Manager', 'Data Miner', 'Data Analyst',\n      'Social Media Manager', 'Human Resource', 'Graphic Designer',\n      'Web Developer', 'SEO Manager'\n    ];\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setAvailableRoles(fallbackRoles);\n        return;\n      }\n\n      const response = await api.get('/roles');\n      console.log('Fetched roles from backend:', response.data.roles);\n      setAvailableRoles(response.data.roles || fallbackRoles);\n    } catch (error) {\n      console.error('Error fetching roles:', error);\n      setAvailableRoles(fallbackRoles);\n    }\n  }, []);\n\n  // Consolidated user fetching logic\n  const fetchUsers = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.log('No token found, using demo data');\n        const demoUsers = JSON.parse(localStorage.getItem('usersData') || '[]');\n        setUsers(demoUsers);\n        setContextUsers(demoUsers);\n        return;\n      }\n\n      // Try API call first\n      const response = await api.get('/users');\n      const transformedUsers = response.data.users.map(user => ({\n        id: user._id,\n        name: user.username,\n        email: user.email,\n        role: user.role,\n        status: user.status,\n        access: user.access || []\n      }));\n\n      setUsers(transformedUsers);\n      setContextUsers(transformedUsers);\n      \n    } catch (error) {\n      console.error('API Error, falling back to demo data:', error);\n      // Fallback to demo data only on API error\n      const demoUsers = JSON.parse(localStorage.getItem('usersData') || '[]');\n      if (demoUsers.length > 0) {\n        setUsers(demoUsers);\n        setContextUsers(demoUsers);\n        setError(null); // Clear error since we have fallback data\n      } else {\n        setError('Failed to fetch users: ' + (error.response?.data?.message || error.message));\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [setContextUsers]);\n\n  // Update user role\n  const handleRoleChange = async (userId, newRole) => {\n    console.log('handleRoleChange called:', { userId, newRole, finalIsAdmin });\n    \n    if (!finalIsAdmin) {\n      toast.error('Only administrators can change user roles');\n      return;\n    }\n\n    try {\n      setError(null);\n      const newStatus = newRole === 'User' ? 'In Review' : 'Active';\n      console.log('Setting new status:', newStatus);\n      \n      const result = await updateUserRole(userId, newRole, newStatus);\n      console.log('updateUserRole result:', result);\n      \n      if (result.success) {\n        // Update local state immediately for UI responsiveness\n        setUsers(prevUsers => prevUsers.map(user => \n          user.id === userId ? { \n            ...user, \n            role: newRole,\n            status: newStatus\n          } : user\n        ));\n        \n        toast.success(`User role updated to ${newRole} and status set to ${newStatus}`);\n      } else {\n        setError(`Failed to update user role: ${result.error}`);\n        toast.error(`Failed to update user role: ${result.error}`);\n      }\n    } catch (error) {\n      console.error('Error updating user role:', error);\n      setError('Failed to update user role: ' + error.message);\n      toast.error('Failed to update user role: ' + error.message);\n    }\n  };\n\n  // Toggle menu visibility\n  const toggleMenu = (userId) => {\n    setOpenMenuId(openMenuId === userId ? null : userId);\n  };\n\n  // Handle menu actions\n  const handleMenuAction = async (userId, action) => {\n    setOpenMenuId(null);\n\n    try {\n      setError(null);\n      \n      if (action === 'edit') {\n        if (!finalIsAdmin) {\n          toast.error('Only administrators can edit user profiles');\n          return;\n        }\n        setSelectedUser(users.find(user => user.id === userId));\n        setShowSidePanel(true);\n        toast.info('Edit user panel opened');\n      } else if (action === 'view') {\n        setSelectedUser(users.find(user => user.id === userId));\n        setShowSidePanel(true);\n        toast.info('Viewing user profile');\n      } else if (action === 'delete') {\n        if (!finalIsAdmin) {\n          toast.error('Only administrators can delete users');\n          return;\n        }\n        if (window.confirm('Are you sure you want to delete this user? This action cannot be undone.')) {\n          const response = await api.delete(`/users/${userId}`);\n          if (response.status === 200) {\n            setUsers(prevUsers => prevUsers.filter(user => user.id !== userId));\n            toast.success('User deleted successfully');\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error performing user action:', error);\n      setError('Failed to perform action: ' + error.message);\n      toast.error('Failed to perform action: ' + error.message);\n    }\n  };\n\n  // Initialize data on component mount\n\n  if (!user) return null;\n\n  // Mock additional user data - in real app this would come from API\n  const userDetails = {\n    ...user,\n    currentProjects: 5,\n    totalProjects: 21,\n    joinDate: '10 - 04 - 2024',\n    phone: '+91 9098989281',\n    location: 'Coffee Estate Homestay, Mullayanagiri Road, Kaimara, Chikmagalur, Karnataka - 577101, India',\n    languages: ['English', 'Hindi'],\n    maritalStatus: 'Single',\n    employmentId: '0020192',\n    responseTime: '24m'\n  };\n\n  return (\n    <>\n      {/* Overlay */}\n      <div \n        className={`side-panel-overlay ${isVisible ? 'visible' : ''}`}\n        onClick={onClose}\n      />\n      \n      {/* Side Panel */}\n      <div className={`user-details-side-panel ${isVisible ? 'visible' : ''}`}>\n        {/* Header */}\n        <div className=\"side-panel-header\">\n          <h3>User Preview</h3>\n          <button className=\"close-btn\" onClick={onClose}>✕</button>\n        </div>\n\n        {/* User Info */}\n        <div className=\"side-panel-content\">\n          <div className=\"user-profile-section\">\n            <div className=\"user-avatar-large\">\n              <div className=\"avatar-icon-large\">👤</div>\n            </div>\n            <div className=\"user-info-text\">\n              <h2>{userDetails.name}</h2>\n              <div className=\"user-status-indicator\">\n                <span className=\"status-dot-green\"></span>\n                <span className=\"status-text\">Online</span>\n              </div>\n              <p className=\"user-email-large\">{userDetails.email}</p>\n            </div>\n          </div>\n\n          {/* Project Stats */}\n          <div className=\"project-stats\">\n            <div className=\"stat-item\">\n              <div className=\"stat-label\">Currently</div>\n              <div className=\"stat-value\">{userDetails.currentProjects}</div>\n            </div>\n            <div className=\"stat-item\">\n              <div className=\"stat-label\">Total Projects</div>\n              <div className=\"stat-value\">{userDetails.totalProjects}</div>\n            </div>\n          </div>\n\n          {/* User Details Section */}\n          <div className=\"details-section\">\n            <h4>User Details</h4>\n            <div className=\"detail-grid-two-column\">\n              <div className=\"detail-row\">\n                <div className=\"detail-item-left\">\n                  <span className=\"detail-label\">E-mail</span>\n                  <span className=\"detail-value\">{userDetails.email}</span>\n                </div>\n                <div className=\"detail-item-right\">\n                  <span className=\"detail-label\">Join Date</span>\n                  <span className=\"detail-value blue-text\">{userDetails.joinDate}</span>\n                </div>\n              </div>\n              <div className=\"detail-row\">\n                <div className=\"detail-item-left\">\n                  <span className=\"detail-label\">Phone No.</span>\n                  <span className=\"detail-value blue-text\">{userDetails.phone}</span>\n                </div>\n                <div className=\"detail-item-right\">\n                  <span className=\"detail-label\">Designation</span>\n                  <span className=\"detail-value\">{userDetails.role}</span>\n                </div>\n              </div>\n              <div className=\"detail-row\">\n                <div className=\"detail-item-left\">\n                  <span className=\"detail-label\">Location</span>\n                  <span className=\"detail-value\">{userDetails.location}</span>\n                </div>\n                <div className=\"detail-item-right\">\n                  <span className=\"detail-label\">Employment ID</span>\n                  <span className=\"detail-value\">{userDetails.employmentId}</span>\n                </div>\n              </div>\n              <div className=\"detail-row\">\n                <div className=\"detail-item-left\">\n                  <span className=\"detail-label\">Language Spoken</span>\n                  <span className=\"detail-value\">{userDetails.languages.join(', ')}</span>\n                </div>\n                <div className=\"detail-item-right\">\n                  <span className=\"detail-label\">Status</span>\n                  <span className=\"detail-value\">{userDetails.status}</span>\n                </div>\n              </div>\n              <div className=\"detail-row\">\n                <div className=\"detail-item-left\">\n                  <span className=\"detail-label\">Marital Status</span>\n                  <span className=\"detail-value\">{userDetails.maritalStatus}</span>\n                </div>\n                <div className=\"detail-item-right\">\n                  <span className=\"detail-label\">Response Time</span>\n                  <span className=\"detail-value\">{userDetails.responseTime}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default UsersRoles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}